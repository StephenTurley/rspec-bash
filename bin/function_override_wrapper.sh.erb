/usr/bin/env bash -c '
# load in command and function overrides
system_ls=$(which ls)
system_grep=$(which grep)

for override_file in $(${system_ls} -d <%=function_override_path_binding_for_template%> 2> /dev/null); do
  source ${override_file}
done

(
  <%=execution_binding_for_template%>
) 2> <%=wrapped_error_path_binding_for_template%>
command_exit_code=$?

# filter stderr for readonly problems
${system_grep} -v "readonly function" <%=wrapped_error_path_binding_for_template%> >&2

# return original exit code
exit ${command_exit_code}'
